(()=>{var ma=Object.create;var Or=Object.defineProperty;var ga=Object.getOwnPropertyDescriptor;var ba=Object.getOwnPropertyNames;var wa=Object.getPrototypeOf,_a=Object.prototype.hasOwnProperty;var xa=(B,j)=>()=>(j||B((j={exports:{}}).exports,j),j.exports);var Ea=(B,j,K,ne)=>{if(j&&typeof j=="object"||typeof j=="function")for(let M of ba(j))!_a.call(B,M)&&M!==K&&Or(B,M,{get:()=>j[M],enumerable:!(ne=ga(j,M))||ne.enumerable});return B};var ka=(B,j,K)=>(K=B!=null?ma(wa(B)):{},Ea(j||!B||!B.__esModule?Or(K,"default",{value:B,enumerable:!0}):K,B));var Cr=xa((Rn,In)=>{(function(B,j){typeof Rn=="object"&&typeof In<"u"?In.exports=j():typeof define=="function"&&define.amd?define(j):(B=typeof globalThis<"u"?globalThis:B||self,B.Dexie=j())})(Rn,function(){"use strict";var B=function(e,t){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},B(e,t)};function j(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");B(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var K=function(){return K=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},K.apply(this,arguments)};function ne(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var M=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,V=Object.keys,z=Array.isArray;typeof Promise<"u"&&!M.Promise&&(M.Promise=Promise);function U(e,t){return typeof t!="object"||V(t).forEach(function(n){e[n]=t[n]}),e}var G=Object.getPrototypeOf,ot={}.hasOwnProperty;function X(e,t){return ot.call(e,t)}function Ce(e,t){typeof t=="function"&&(t=t(G(e))),(typeof Reflect>"u"?V:Reflect.ownKeys)(t).forEach(function(n){fe(e,n,t[n])})}var Mn=Object.defineProperty;function fe(e,t,n,r){Mn(e,t,U(n&&X(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Re(e){return{from:function(t){return e.prototype=Object.create(t.prototype),fe(e.prototype,"constructor",e),{extend:Ce.bind(null,e.prototype)}}}}var Fr=Object.getOwnPropertyDescriptor;function Fn(e,t){var n=Fr(e,t),r;return n||(r=G(e))&&Fn(r,t)}var jr=[].slice;function st(e,t,n){return jr.call(e,t,n)}function jn(e,t){return t(e)}function We(e){if(!e)throw new Error("Assertion Failed")}function Ln(e){M.setImmediate?setImmediate(e):setTimeout(e,0)}function Lr(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function oe(e,t){if(typeof t=="string"&&X(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=oe(e,t[r]);n.push(a)}return n}var u=t.indexOf(".");if(u!==-1){var o=e[t.substr(0,u)];return o==null?void 0:oe(o,t.substr(u+1))}}function J(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){We(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)J(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var u=t.substr(0,a),o=t.substr(a+1);if(o==="")n===void 0?z(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n;else{var s=e[u];(!s||!X(e,u))&&(s=e[u]={}),J(s,o,n)}}else n===void 0?z(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Nr(e,t){typeof t=="string"?J(e,t,void 0):"length"in t&&[].map.call(t,function(n){J(e,n,void 0)})}function Nn(e){var t={};for(var n in e)X(e,n)&&(t[n]=e[n]);return t}var Vr=[].concat;function Vn(e){return Vr.apply([],e)}var zr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Vn([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return M[e]}),zn=new Set(zr.map(function(e){return M[e]}));function Wn(e){var t={};for(var n in e)if(X(e,n)){var r=e[n];t[n]=!r||typeof r!="object"||zn.has(r.constructor)?r:Wn(r)}return t}function Wr(e){for(var t in e)if(X(e,t))return!1;return!0}var $e=null;function he(e){$e=new WeakMap;var t=jt(e);return $e=null,t}function jt(e){if(!e||typeof e!="object")return e;var t=$e.get(e);if(t)return t;if(z(e)){t=[],$e.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(jt(e[n]))}else if(zn.has(e.constructor))t=e;else{var i=G(e);t=i===Object.prototype?{}:Object.create(i),$e.set(e,t);for(var a in e)X(e,a)&&(t[a]=jt(e[a]))}return t}var $r={}.toString;function Lt(e){return $r.call(e).slice(8,-1)}var Nt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ur=typeof Nt=="symbol"?function(e){var t;return e!=null&&(t=e[Nt])&&t.apply(e)}:function(){return null};function Ee(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var Ie={};function se(e){var t,n,r,i;if(arguments.length===1){if(z(e))return e.slice();if(this===Ie&&typeof e=="string")return[e];if(i=Ur(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Vt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Yr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],$n=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],zt=Yr.concat($n),Hr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Be(e,t){this.name=e,this.message=t}Re(Be).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Un(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function ct(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Un(e,t)}Re(ct).from(Be);function Me(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Un(e,this.failures)}Re(Me).from(Be);var Wt=zt.reduce(function(e,t){return e[t]=t+"Error",e},{}),Qr=Be,O=zt.reduce(function(e,t){var n=t+"Error";function r(i,a){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=Hr[t]||n,this.inner=null)}return Re(r).from(Qr),e[t]=r,e},{});O.Syntax=SyntaxError,O.Type=TypeError,O.Range=RangeError;var Yn=$n.reduce(function(e,t){return e[t+"Error"]=O[t],e},{});function Gr(e,t){if(!e||e instanceof Be||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Yn[e.name])return e;var n=new Yn[e.name](t||e.message,e);return"stack"in e&&fe(n,"stack",{get:function(){return this.inner.stack}}),n}var lt=zt.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=O[t]),e},{});lt.ModifyError=ct,lt.DexieError=Be,lt.BulkError=Me;function L(){}function Ue(e){return e}function Xr(e,t){return e==null||e===Ue?t:function(n){return t(e(n))}}function ke(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Jr(e,t){return e===L?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ke(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ke(i,this.onerror):i),a!==void 0?a:n}}function qr(e,t){return e===L?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ke(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ke(r,this.onerror):r)}}function Zr(e,t){return e===L?t:function(n){var r=e.apply(this,arguments);U(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ke(i,this.onsuccess):i),a&&(this.onerror=this.onerror?ke(a,this.onerror):a),r===void 0?u===void 0?void 0:u:U(r,u)}}function ei(e,t){return e===L?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function $t(e,t){return e===L?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var re=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Hn(e,t){re=e}var Ye={},Qn=100,Ut=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,G(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,G(t),e]}(),Gn=Ut[0],Xn=Ut[1],ti=Ut[2],ni=Xn&&Xn.then,He=Gn&&Gn.constructor,Yt=!!ti;function ri(){queueMicrotask(ai)}var Qe=function(e,t){Ge.push([e,t]),ft&&(ri(),ft=!1)},Ht=!0,ft=!0,Se=[],ht=[],Qt=Ue,de={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:L,pgp:!1,env:{},finalize:L},A=de,Ge=[],Ke=0,dt=[];function E(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=A;if(typeof e!="function"){if(e!==Ye)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Xt(this,this._value);return}this._state=null,this._value=null,++t.ref,qn(this,e)}var Gt={get:function(){var e=A,t=mt;function n(r,i){var a=this,u=!e.global&&(e!==A||t!==mt),o=u&&!ve(),s=new E(function(c,h){Jt(a,new Jn(tr(r,e,u,o),tr(i,e,u,o),c,h,e))});return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=Ye,n},set:function(e){fe(this,"then",e&&e.prototype===Ye?Gt:{get:function(){return e},set:Gt.set})}};Ce(E.prototype,{then:Gt,_then:function(e,t){Jt(this,new Jn(null,null,e,t,A))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):pt(r)}):this.then(null,function(r){return r&&r.name===t?n(r):pt(r)})},finally:function(e){return this.then(function(t){return E.resolve(e()).then(function(){return t})},function(t){return E.resolve(e()).then(function(){return pt(t)})})},timeout:function(e,t){var n=this;return e<1/0?new E(function(r,i){var a=setTimeout(function(){return i(new O.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&fe(E.prototype,Symbol.toStringTag,"Dexie.Promise"),de.env=er();function Jn(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Ce(E,{all:function(){var e=se.apply(null,arguments).map(gt);return new E(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return E.resolve(i).then(function(u){e[a]=u,--r||t(e)},n)})})},resolve:function(e){if(e instanceof E)return e;if(e&&typeof e.then=="function")return new E(function(n,r){e.then(n,r)});var t=new E(Ye,!0,e);return t},reject:pt,race:function(){var e=se.apply(null,arguments).map(gt);return new E(function(t,n){e.map(function(r){return E.resolve(r).then(t,n)})})},PSD:{get:function(){return A},set:function(e){return A=e}},totalEchoes:{get:function(){return mt}},newPSD:pe,usePSD:Ae,scheduler:{get:function(){return Qe},set:function(e){Qe=e}},rejectionMapper:{get:function(){return Qt},set:function(e){Qt=e}},follow:function(e,t){return new E(function(n,r){return pe(function(i,a){var u=A;u.unhandleds=[],u.onunhandled=a,u.finalize=ke(function(){var o=this;ui(function(){o.unhandleds.length===0?i():a(o.unhandleds[0])})},u.finalize),e()},t,n,r)})}}),He&&(He.allSettled&&fe(E,"allSettled",function(){var e=se.apply(null,arguments).map(gt);return new E(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return E.resolve(i).then(function(u){return r[a]={status:"fulfilled",value:u}},function(u){return r[a]={status:"rejected",reason:u}}).then(function(){return--n||t(r)})})})}),He.any&&typeof AggregateError<"u"&&fe(E,"any",function(){var e=se.apply(null,arguments).map(gt);return new E(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,u){return E.resolve(a).then(function(o){return t(o)},function(o){i[u]=o,--r||n(new AggregateError(i))})})})}));function qn(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Fe();n&&typeof n.then=="function"?qn(e,function(i,a){n instanceof E?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,Zn(e)),r&&je()}},Xt.bind(null,e))}catch(n){Xt(e,n)}}function Xt(e,t){if(ht.push(t),e._state===null){var n=e._lib&&Fe();t=Qt(t),e._state=!1,e._value=t,oi(e),Zn(e),n&&je()}}function Zn(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Jt(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Ke===0&&(++Ke,Qe(function(){--Ke===0&&qt()},[]))}function Jt(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ke,Qe(ii,[n,e,t])}function ii(e,t,n){try{var r,i=t._value;!t._state&&ht.length&&(ht=[]),r=re&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),!t._state&&ht.indexOf(i)===-1&&si(t),n.resolve(r)}catch(a){n.reject(a)}finally{--Ke===0&&qt(),--n.psd.ref||n.psd.finalize()}}function ai(){Ae(de,function(){Fe()&&je()})}function Fe(){var e=Ht;return Ht=!1,ft=!1,e}function je(){var e,t,n;do for(;Ge.length>0;)for(e=Ge,Ge=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ge.length>0);Ht=!0,ft=!0}function qt(){var e=Se;Se=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=dt.slice(0),n=t.length;n;)t[--n]()}function ui(e){function t(){e(),dt.splice(dt.indexOf(t),1)}dt.push(t),++Ke,Qe(function(){--Ke===0&&qt()},[])}function oi(e){Se.some(function(t){return t._value===e._value})||Se.push(e)}function si(e){for(var t=Se.length;t;)if(Se[--t]._value===e._value){Se.splice(t,1);return}}function pt(e){return new E(Ye,!1,e)}function W(e,t){var n=A;return function(){var r=Fe(),i=A;try{return ye(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{ye(i,!1),r&&je()}}}var Y={awaits:0,echoes:0,id:0},ci=0,vt=[],yt=0,mt=0,li=0;function pe(e,t,n,r){var i=A,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++li,de.env,a.env=Yt?{Promise:E,PromiseProp:{value:E,configurable:!0,writable:!0},all:E.all,race:E.race,allSettled:E.allSettled,any:E.any,resolve:E.resolve,reject:E.reject}:{},t&&U(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Ae(a,e,n,r);return a.ref===0&&a.finalize(),u}function Le(){return Y.id||(Y.id=++ci),++Y.awaits,Y.echoes+=Qn,Y.id}function ve(){return Y.awaits?(--Y.awaits===0&&(Y.id=0),Y.echoes=Y.awaits*Qn,!0):!1}(""+ni).indexOf("[native code]")===-1&&(Le=ve=L);function gt(e){return Y.echoes&&e&&e.constructor===He?(Le(),e.then(function(t){return ve(),t},function(t){return ve(),$(t)})):e}function fi(e){++mt,(!Y.echoes||--Y.echoes===0)&&(Y.echoes=Y.awaits=Y.id=0),vt.push(A),ye(e,!0)}function hi(){var e=vt[vt.length-1];vt.pop(),ye(e,!1)}function ye(e,t){var n=A;if((t?Y.echoes&&(!yt++||e!==A):yt&&(!--yt||e!==A))&&queueMicrotask(t?fi.bind(null,e):hi),e!==A&&(A=e,n===de&&(de.env=er()),Yt)){var r=de.env.Promise,i=e.env;(n.global||e.global)&&(Object.defineProperty(M,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function er(){var e=M.Promise;return Yt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(M,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ae(e,t,n,r,i){var a=A;try{return ye(e,!0),t(n,r,i)}finally{ye(a,!1)}}function tr(e,t,n,r){return typeof e!="function"?e:function(){var i=A;n&&Le(),ye(t,!0);try{return e.apply(this,arguments)}finally{ye(i,!1),r&&queueMicrotask(ve)}}}function Zt(e){Promise===He&&Y.echoes===0?yt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var $=E.reject;function en(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!A.letThrough&&!e._vip){if(e._state.openComplete)return $(new O.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return $(new O.DatabaseClosed);e.open().catch(L)}return e._state.dbReadyPromise.then(function(){return en(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===Wt.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return en(e,t,n,r)})):$(a)}return i._promise(t,function(a,u){return pe(function(){return A.trans=i,r(a,u,i)})}).then(function(a){if(t==="readwrite")try{i.idbtrans.commit()}catch{}return t==="readonly"?a:i._completion.then(function(){return a})})}}var nr="4.0.4",Oe="\uFFFF",tn=-1/0,ce="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",rr="String expected.",Ne=[],bt="__dbnames",nn="readonly",rn="readwrite";function Te(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ir={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function wt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=he(t),delete t[e]),t}:function(t){return t}}function ar(){throw O.Type()}function F(e,t){try{var n=ur(e),r=ur(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return pi(or(e),or(t));case"Array":return di(e,t)}}catch{}return NaN}function di(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var u=F(e[a],t[a]);if(u!==0)return u}return n===r?0:n<r?-1:1}function pi(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function ur(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Lt(e);return n==="ArrayBuffer"?"binary":n}function or(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var sr=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||A.trans,a=this.name,u=re&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function o(h,l,p){if(!p.schema[a])throw new O.NotFound("Table "+a+" not part of transaction");return n(p.idbtrans,p)}var s=Fe();try{var c=i&&i.db._novip===this.db._novip?i===A.trans?i._promise(t,o,r):pe(function(){return i._promise(t,o,r)},{trans:i,transless:A.transless||A}):en(this.db,t,[this.name],o);return u&&(c._consoleTask=u,c=c.catch(function(h){return console.trace(h),$(h)})),c}finally{s&&je()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):t==null?$(new O.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(z(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var n=V(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(l){if(l.compound&&n.every(function(_){return l.keyPath.indexOf(_)>=0})){for(var p=0;p<n.length;++p)if(n.indexOf(l.keyPath[p])===-1)return!1;return!0}return!1}).sort(function(l,p){return l.keyPath.length-p.keyPath.length})[0];if(r&&this.db._maxKey!==Oe){var i=r.keyPath.slice(0,n.length);return this.where(i).equals(i.map(function(l){return t[l]}))}!r&&re&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var a=this.schema.idxByName,u=this.db._deps.indexedDB;function o(l,p){return u.cmp(l,p)===0}var s=n.reduce(function(l,p){var _=l[0],f=l[1],d=a[p],y=t[p];return[_||d,_||!d?Te(f,d&&d.multi?function(m){var b=oe(m,p);return z(b)&&b.some(function(g){return o(y,g)})}:function(m){return o(y,oe(m,p))}):f]},[null,null]),c=s[0],h=s[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(h):r?this.filter(h):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,z(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var n=this,r=n.db,i=n.name;this.schema.mappedClass=t,t.prototype instanceof ar&&(t=function(s){j(c,s);function c(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),c.prototype.table=function(){return i},c}(t));for(var a=new Set,u=t.prototype;u;u=G(u))Object.getOwnPropertyNames(u).forEach(function(s){return a.add(s)});var o=function(s){if(!s)return s;var c=Object.create(t.prototype);for(var h in s)if(!a.has(h))try{c[h]=s[h]}catch{}return c};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),t},e.prototype.defineClass=function(){function t(n){U(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,u=i.keyPath,o=t;return u&&a&&(o=wt(u)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})}).then(function(s){return s.numFailures?E.reject(s.failures[0]):s.lastResult}).then(function(s){if(u)try{J(t,u,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!z(t)){var r=oe(t,this.schema.primKey.keyPath);return r===void 0?$(new O.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,u=i.keyPath,o=t;return u&&a&&(o=wt(u)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?E.reject(s.failures[0]):s.lastResult}).then(function(s){if(u)try{J(t,u,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?E.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:ir})}).then(function(n){return n.numFailures?E.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var u=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new O.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new O.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,p=h&&c?t.map(wt(h)):t;return i.core.mutate({trans:o,type:"add",keys:a,values:p,wantResults:u}).then(function(_){var f=_.numFailures,d=_.results,y=_.lastResult,m=_.failures,b=u?d:y;if(f===0)return b;throw new Me("".concat(i.name,".bulkAdd(): ").concat(f," of ").concat(l," operations failed"),m)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var u=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new O.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new O.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,p=h&&c?t.map(wt(h)):t;return i.core.mutate({trans:o,type:"put",keys:a,values:p,wantResults:u}).then(function(_){var f=_.numFailures,d=_.results,y=_.lastResult,m=_.failures,b=u?d:y;if(f===0)return b;throw new Me("".concat(i.name,".bulkPut(): ").concat(f," of ").concat(l," operations failed"),m)})})},e.prototype.bulkUpdate=function(t){var n=this,r=this.core,i=t.map(function(o){return o.key}),a=t.map(function(o){return o.changes}),u=[];return this._trans("readwrite",function(o){return r.getMany({trans:o,keys:i,cache:"clone"}).then(function(s){var c=[],h=[];t.forEach(function(p,_){var f=p.key,d=p.changes,y=s[_];if(y){for(var m=0,b=Object.keys(d);m<b.length;m++){var g=b[m],w=d[g];if(g===n.schema.primKey.keyPath){if(F(w,f)!==0)throw new O.Constraint("Cannot update primary key in bulkUpdate()")}else J(y,g,w)}u.push(_),c.push(f),h.push(y)}});var l=c.length;return r.mutate({trans:o,type:"put",keys:c,values:h,updates:{keys:i,changeSpecs:a}}).then(function(p){var _=p.numFailures,f=p.failures;if(_===0)return l;for(var d=0,y=Object.keys(f);d<y.length;d++){var m=y[d],b=u[Number(m)];if(b!=null){var g=f[m];delete f[m],f[b]=g}}throw new Me("".concat(n.name,".bulkUpdate(): ").concat(_," of ").concat(l," operations failed"),f)})})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var a=i.numFailures,u=i.lastResult,o=i.failures;if(a===0)return u;throw new Me("".concat(n.name,".bulkDelete(): ").concat(a," of ").concat(r," operations failed"),o)})},e}();function Xe(e){var t={},n=function(o,s){if(s){for(var c=arguments.length,h=new Array(c-1);--c;)h[c-1]=arguments[c];return t[o].subscribe.apply(null,h),e}else if(typeof o=="string")return t[o]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(o,s,c){if(typeof o=="object")return u(o);s||(s=ei),c||(c=L);var h={subscribers:[],fire:c,subscribe:function(l){h.subscribers.indexOf(l)===-1&&(h.subscribers.push(l),h.fire=s(h.fire,l))},unsubscribe:function(l){h.subscribers=h.subscribers.filter(function(p){return p!==l}),h.fire=h.subscribers.reduce(s,c)}};return t[o]=n[o]=h,h}function u(o){V(o).forEach(function(s){var c=o[s];if(z(c))a(s,o[s][0],o[s][1]);else if(c==="asap")var h=a(s,Ue,function(){for(var p=arguments.length,_=new Array(p);p--;)_[p]=arguments[p];h.subscribers.forEach(function(f){Ln(function(){f.apply(null,_)})})});else throw new O.InvalidArgument("Invalid event config")})}}function Je(e,t){return Re(t).from({prototype:e}),t}function vi(e){return Je(sr.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Xe(null,{creating:[Jr,L],reading:[Xr,Ue],updating:[Zr,L],deleting:[qr,L]})})}function Ve(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function an(e,t){e.filter=Te(e.filter,t)}function un(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Te(r(),t())}:t,e.justLimit=n&&!r}function yi(e,t){e.isMatch=Te(e.isMatch,t)}function _t(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new O.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function cr(e,t,n){var r=_t(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function xt(e,t,n,r){var i=e.replayFilter?Te(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},u=function(o,s,c){if(!i||i(s,c,function(p){return s.stop(p)},function(p){return s.fail(p)})){var h=s.primaryKey,l=""+h;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(h)),X(a,l)||(a[l]=!0,t(o,s,c))}};return Promise.all([e.or._iterate(u,n),lr(cr(e,r,n),e.algorithm,u,!e.keysOnly&&e.valueMapper)])}else return lr(cr(e,r,n),Te(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function lr(e,t,n,r){var i=r?function(u,o,s){return n(r(u),o,s)}:n,a=W(i);return e.then(function(u){if(u)return u.start(function(){var o=function(){return u.continue()};(!t||t(u,function(s){return o=s},function(s){u.stop(s),o=L},function(s){u.fail(s),o=L}))&&a(u.value,u,function(s){return o=s}),o()})})}var mi=Symbol(),on=function(){function e(t){Object.assign(this,t)}return e.prototype.execute=function(t){var n,r=(n=this.replacePrefix)===null||n===void 0?void 0:n[0];return r&&typeof t=="string"&&t.startsWith(r)?this.replacePrefix[1]+t.substring(r.length):t},e}(),gi=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,$.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,$.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Te(n.algorithm,t)},e.prototype._iterate=function(t,n){return xt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&U(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return xt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(Ve(i,!0))return a.count({trans:r,query:{index:_t(i,a.schema),range:i.range}}).then(function(o){return Math.min(o,i.limit)});var u=0;return xt(i,function(){return++u,!1},r,a).then(function(){return u})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function u(c,h){return h?u(c[r[h]],h-1):c[i]}var o=this._ctx.dir==="next"?1:-1;function s(c,h){var l=u(c,a),p=u(h,a);return l<p?-o:l>p?o:0}return this.toArray(function(c){return c.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Ve(i,!0)&&i.limit>0){var a=i.valueMapper,u=_t(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:u,range:i.range}}).then(function(s){var c=s.result;return a?c.map(a):c})}else{var o=[];return xt(i,function(s){return o.push(s)},r,i.table.core).then(function(){return o})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Ve(n)?un(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):un(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),un(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return an(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return an(this._ctx,function(n){return t(n.value)}),yi(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Ve(n,!0)&&n.limit>0)return this._read(function(i){var a=_t(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return an(this._ctx,function(i){var a=i.primaryKey.toString(),u=X(r,a);return r[a]=!0,!u}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var u=V(t),o=u.length;a=function(m){for(var b=!1,g=0;g<o;++g){var w=u[g],v=t[w],x=oe(m,w);v instanceof on?(J(m,w,v.execute(x)),b=!0):x!==v&&(J(m,w,v),b=!0)}return b}}var s=r.table.core,c=s.schema.primaryKey,h=c.outbound,l=c.extractKey,p=n.db._options.modifyChunkSize||200,_=[],f=0,d=[],y=function(m,b){var g=b.failures,w=b.numFailures;f+=m-w;for(var v=0,x=V(g);v<x.length;v++){var k=x[v];_.push(g[k])}};return n.clone().primaryKeys().then(function(m){var b=function(g){var w=Math.min(p,m.length-g);return s.getMany({trans:i,keys:m.slice(g,g+w),cache:"immutable"}).then(function(v){for(var x=[],k=[],S=h?[]:null,T=[],R=0;R<w;++R){var D=v[R],I={value:he(D),primKey:m[g+R]};a.call(I,I.value,I)!==!1&&(I.value==null?T.push(m[g+R]):!h&&F(l(D),l(I.value))!==0?(T.push(m[g+R]),x.push(I.value)):(k.push(I.value),h&&S.push(m[g+R])))}var C=Ve(r)&&r.limit===1/0&&(typeof t!="function"||t===sn)&&{index:r.index,range:r.range};return Promise.resolve(x.length>0&&s.mutate({trans:i,type:"add",values:x}).then(function(N){for(var P in N.failures)T.splice(parseInt(P),1);y(x.length,N)})).then(function(){return(k.length>0||C&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:S,values:k,criteria:C,changeSpec:typeof t!="function"&&t}).then(function(N){return y(k.length,N)})}).then(function(){return(T.length>0||C&&t===sn)&&s.mutate({trans:i,type:"delete",keys:T,criteria:C}).then(function(N){return y(T.length,N)})}).then(function(){return m.length>g+w&&b(g+p)})})};return b(0).then(function(){if(_.length>0)throw new ct("Error modifying one or more objects",_,f,d);return m.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Ve(t)&&(t.isPrimKey||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(u){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(o){var s=o.failures;o.lastResult,o.results;var c=o.numFailures;if(c)throw new ct("Could not delete some values",Object.keys(s).map(function(h){return s[h]}),u-c);return u-c})})}):this.modify(sn)},e}(),sn=function(e,t){return t.value=null};function bi(e){return Je(gi.prototype,function(n,r){this.db=e;var i=ir,a=null;if(r)try{i=r()}catch(c){a=c}var u=n._ctx,o=u.table,s=o.hook.reading.fire;this._ctx={table:o,index:u.index,isPrimKey:!u.index||o.schema.primKey.keyPath&&u.index===o.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:u.or,valueMapper:s!==Ue?s:null}})}function wi(e,t){return e<t?-1:e===t?0:1}function _i(e,t){return e>t?-1:e===t?0:1}function q(e,t,n){var r=e instanceof hr?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function ze(e){return new e.Collection(e,function(){return fr("")}).limit(0)}function xi(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Ei(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function ki(e,t,n,r,i,a){for(var u=Math.min(e.length,r.length),o=-1,s=0;s<u;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;i(e[s],c)<0&&(o=s)}return u<r.length&&a==="next"?e+n.substr(e.length):u<e.length&&a==="prev"?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}function Et(e,t,n,r){var i,a,u,o,s,c,h,l=n.length;if(!n.every(function(d){return typeof d=="string"}))return q(e,rr);function p(d){i=xi(d),a=Ei(d),u=d==="next"?wi:_i;var y=n.map(function(m){return{lower:a(m),upper:i(m)}}).sort(function(m,b){return u(m.lower,b.lower)});o=y.map(function(m){return m.upper}),s=y.map(function(m){return m.lower}),c=d,h=d==="next"?"":r}p("next");var _=new e.Collection(e,function(){return me(o[0],s[l-1]+r)});_._ondirectionchange=function(d){p(d)};var f=0;return _._addAlgorithm(function(d,y,m){var b=d.key;if(typeof b!="string")return!1;var g=a(b);if(t(g,s,f))return!0;for(var w=null,v=f;v<l;++v){var x=ki(b,g,o[v],s[v],u,c);x===null&&w===null?f=v+1:(w===null||u(w,x)>0)&&(w=x)}return y(w!==null?function(){d.continue(w+h)}:m),!1}),_}function me(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function fr(e){return{type:1,lower:e,upper:e}}var hr=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?ze(this):new this.Collection(this,function(){return me(t,n,!r,!i)})}catch{return q(this,ce)}},e.prototype.equals=function(t){return t==null?q(this,ce):new this.Collection(this,function(){return fr(t)})},e.prototype.above=function(t){return t==null?q(this,ce):new this.Collection(this,function(){return me(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?q(this,ce):new this.Collection(this,function(){return me(t,void 0,!1)})},e.prototype.below=function(t){return t==null?q(this,ce):new this.Collection(this,function(){return me(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?q(this,ce):new this.Collection(this,function(){return me(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?q(this,rr):this.between(t,t+Oe,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Et(this,function(n,r){return n.indexOf(r[0])===0},[t],Oe)},e.prototype.equalsIgnoreCase=function(t){return Et(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=se.apply(Ie,arguments);return t.length===0?ze(this):Et(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=se.apply(Ie,arguments);return t.length===0?ze(this):Et(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Oe)},e.prototype.anyOf=function(){var t=this,n=se.apply(Ie,arguments),r=this._cmp;try{n.sort(r)}catch{return q(this,ce)}if(n.length===0)return ze(this);var i=new this.Collection(this,function(){return me(n[0],n[n.length-1])});i._ondirectionchange=function(u){r=u==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(u,o,s){for(var c=u.key;r(c,n[a])>0;)if(++a,a===n.length)return o(s),!1;return r(c,n[a])===0?!0:(o(function(){u.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[tn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=se.apply(Ie,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return q(this,ce)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[tn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,u=this._descending,o=this._min,s=this._max;if(t.length===0)return ze(this);if(!t.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&a(v[0],v[1])<=0}))return q(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",O.InvalidArgument);var c=!n||n.includeLowers!==!1,h=n&&n.includeUppers===!0;function l(v,x){for(var k=0,S=v.length;k<S;++k){var T=v[k];if(i(x[0],T[1])<0&&i(x[1],T[0])>0){T[0]=o(T[0],x[0]),T[1]=s(T[1],x[1]);break}}return k===S&&v.push(x),v}var p=a;function _(v,x){return p(v[0],x[0])}var f;try{f=t.reduce(l,[]),f.sort(_)}catch{return q(this,ce)}var d=0,y=h?function(v){return a(v,f[d][1])>0}:function(v){return a(v,f[d][1])>=0},m=c?function(v){return u(v,f[d][0])>0}:function(v){return u(v,f[d][0])>=0};function b(v){return!y(v)&&!m(v)}var g=y,w=new this.Collection(this,function(){return me(f[0][0],f[f.length-1][1],!c,!h)});return w._ondirectionchange=function(v){v==="next"?(g=y,p=a):(g=m,p=u),f.sort(_)},w._addAlgorithm(function(v,x,k){for(var S=v.key;g(S);)if(++d,d===f.length)return x(k),!1;return b(S)?!0:(r._cmp(S,f[d][1])===0||r._cmp(S,f[d][0])===0||x(function(){p===a?v.continue(f[d][0]):v.continue(f[d][1])}),!1)}),w},e.prototype.startsWithAnyOf=function(){var t=se.apply(Ie,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?ze(this):this.inAnyRange(t.map(function(n){return[n,n+Oe]})):q(this,"startsWithAnyOf() only works with strings")},e}();function Si(e){return Je(hr.prototype,function(n,r,i){if(this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i},this._cmp=this._ascending=F,this._descending=function(a,u){return F(u,a)},this._max=function(a,u){return F(a,u)>0?a:u},this._min=function(a,u){return F(a,u)<0?a:u},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new O.MissingAPI})}function ie(e){return W(function(t){return qe(t),e(t.target.error),!1})}function qe(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ze="storagemutated",cn="x-storagemutated-1",ge=Xe(null,Ze),Ki=function(){function e(){}return e.prototype._lock=function(){return We(!A.global),++this._reculock,this._reculock===1&&!A.global&&(A.lockOwnerFor=this),this},e.prototype._unlock=function(){if(We(!A.global),--this._reculock===0)for(A.global||(A.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Ae(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&A.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(We(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new O.DatabaseClosed(i);case"MissingAPIError":throw new O.MissingAPI(i.message,i);default:throw new O.OpenFailed(i)}if(!this.active)throw new O.TransactionInactive;return We(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=W(function(a){qe(a),n._reject(t.error)}),t.onabort=W(function(a){qe(a),n.active&&n._reject(new O.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=W(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&ge.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return $(new O.ReadOnly("Transaction is readonly"));if(!this.active)return $(new O.TransactionInactive);if(this._locked())return new E(function(u,o){i._blockedFuncs.push([function(){i._promise(t,n,r).then(u,o)},A])});if(r)return pe(function(){var u=new E(function(o,s){i._lock();var c=n(o,s,i);c&&c.then&&c.then(o,s)});return u.finally(function(){return i._unlock()}),u._lib=!0,u});var a=new E(function(u,o){var s=n(u,o,i);s&&s.then&&s.then(u,o)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=E.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function u(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=u)})()}var a=n._waitingFor;return new E(function(u,o){r.then(function(s){return n._waitingQueue.push(W(u.bind(null,s)))},function(s){return n._waitingQueue.push(W(o.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new O.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(X(n,t))return n[t];var r=this.schema[t];if(!r)throw new O.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Ai(e){return Je(Ki.prototype,function(n,r,i,a,u){var o=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Xe(this,"complete","error","abort"),this.parent=u||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new E(function(s,c){o._resolve=s,o._reject=c}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(s){var c=o.active;return o.active=!1,o.on.error.fire(s),o.parent?o.parent._reject(s):c&&o.idbtrans&&o.idbtrans.abort(),$(s)})})}function ln(e,t,n,r,i,a,u){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!u?"&":"")+(r?"*":"")+(i?"++":"")+dr(t)}}function dr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function fn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Lr(n,function(r){return[r.name,r]})}}function Oi(e){return e.length===1?e[0]:e}var et=function(e){try{return e.only([[]]),et=function(){return[[]]},[[]]}catch{return et=function(){return Oe},Oe}};function hn(e){return e==null?function(){}:typeof e=="string"?Ti(e):function(t){return oe(t,e)}}function Ti(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return oe(n,e)}}function pr(e){return[].slice.call(e)}var Pi=0;function tt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Di(e,t,n){function r(l,p){var _=pr(l.objectStoreNames);return{schema:{name:l.name,tables:_.map(function(f){return p.objectStore(f)}).map(function(f){var d=f.keyPath,y=f.autoIncrement,m=z(d),b=d==null,g={},w={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:m,keyPath:d,autoIncrement:y,unique:!0,extractKey:hn(d)},indexes:pr(f.indexNames).map(function(v){return f.index(v)}).map(function(v){var x=v.name,k=v.unique,S=v.multiEntry,T=v.keyPath,R=z(T),D={name:x,compound:R,keyPath:T,unique:k,multiEntry:S,extractKey:hn(T)};return g[tt(T)]=D,D}),getIndexByKeyPath:function(v){return g[tt(v)]}};return g[":id"]=w.primaryKey,d!=null&&(g[tt(d)]=w.primaryKey),w})},hasGetAll:_.length>0&&"getAll"in p.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var p=l.lower,_=l.upper,f=l.lowerOpen,d=l.upperOpen,y=p===void 0?_===void 0?null:t.upperBound(_,!!d):_===void 0?t.lowerBound(p,!!f):t.bound(p,_,!!f,!!d);return y}function a(l){var p=l.name;function _(y){var m=y.trans,b=y.type,g=y.keys,w=y.values,v=y.range;return new Promise(function(x,k){x=W(x);var S=m.objectStore(p),T=S.keyPath==null,R=b==="put"||b==="add";if(!R&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var D=(g||w||{length:1}).length;if(g&&w&&g.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(D===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var I,C=[],N=[],P=0,H=function(ue){++P,qe(ue)};if(b==="deleteRange"){if(v.type===4)return x({numFailures:P,failures:N,results:[],lastResult:void 0});v.type===3?C.push(I=S.clear()):C.push(I=S.delete(i(v)))}else{var ee=R?T?[w,g]:[w,null]:[g,null],_e=ee[0],ae=ee[1];if(R)for(var Z=0;Z<D;++Z)C.push(I=ae&&ae[Z]!==void 0?S[b](_e[Z],ae[Z]):S[b](_e[Z])),I.onerror=H;else for(var Z=0;Z<D;++Z)C.push(I=S[b](_e[Z])),I.onerror=H}var xe=function(ue){var it=ue.target.result;C.forEach(function(te,Bt){return te.error!=null&&(N[Bt]=te.error)}),x({numFailures:P,failures:N,results:b==="delete"?g:C.map(function(te){return te.result}),lastResult:it})};I.onerror=function(ue){H(ue),xe(ue)},I.onsuccess=xe})}function f(y){var m=y.trans,b=y.values,g=y.query,w=y.reverse,v=y.unique;return new Promise(function(x,k){x=W(x);var S=g.index,T=g.range,R=m.objectStore(p),D=S.isPrimaryKey?R:R.index(S.name),I=w?v?"prevunique":"prev":v?"nextunique":"next",C=b||!("openKeyCursor"in D)?D.openCursor(i(T),I):D.openKeyCursor(i(T),I);C.onerror=ie(k),C.onsuccess=W(function(N){var P=C.result;if(!P){x(null);return}P.___id=++Pi,P.done=!1;var H=P.continue.bind(P),ee=P.continuePrimaryKey;ee&&(ee=ee.bind(P));var _e=P.advance.bind(P),ae=function(){throw new Error("Cursor not started")},Z=function(){throw new Error("Cursor not stopped")};P.trans=m,P.stop=P.continue=P.continuePrimaryKey=P.advance=ae,P.fail=W(k),P.next=function(){var xe=this,ue=1;return this.start(function(){return ue--?xe.continue():xe.stop()}).then(function(){return xe})},P.start=function(xe){var ue=new Promise(function(te,Bt){te=W(te),C.onerror=ie(Bt),P.fail=Bt,P.stop=function(ya){P.stop=P.continue=P.continuePrimaryKey=P.advance=Z,te(ya)}}),it=function(){if(C.result)try{xe()}catch(te){P.fail(te)}else P.done=!0,P.start=function(){throw new Error("Cursor behind last entry")},P.stop()};return C.onsuccess=W(function(te){C.onsuccess=it,it()}),P.continue=H,P.continuePrimaryKey=ee,P.advance=_e,it(),ue},x(P)},k)})}function d(y){return function(m){return new Promise(function(b,g){b=W(b);var w=m.trans,v=m.values,x=m.limit,k=m.query,S=x===1/0?void 0:x,T=k.index,R=k.range,D=w.objectStore(p),I=T.isPrimaryKey?D:D.index(T.name),C=i(R);if(x===0)return b({result:[]});if(y){var N=v?I.getAll(C,S):I.getAllKeys(C,S);N.onsuccess=function(_e){return b({result:_e.target.result})},N.onerror=ie(g)}else{var P=0,H=v||!("openKeyCursor"in I)?I.openCursor(C):I.openKeyCursor(C),ee=[];H.onsuccess=function(_e){var ae=H.result;if(!ae)return b({result:ee});if(ee.push(v?ae.value:ae.primaryKey),++P===x)return b({result:ee});ae.continue()},H.onerror=ie(g)}})}}return{name:p,schema:l,mutate:_,getMany:function(y){var m=y.trans,b=y.keys;return new Promise(function(g,w){g=W(g);for(var v=m.objectStore(p),x=b.length,k=new Array(x),S=0,T=0,R,D=function(P){var H=P.target;(k[H._pos]=H.result)!=null,++T===S&&g(k)},I=ie(w),C=0;C<x;++C){var N=b[C];N!=null&&(R=v.get(b[C]),R._pos=C,R.onsuccess=D,R.onerror=I,++S)}S===0&&g(k)})},get:function(y){var m=y.trans,b=y.key;return new Promise(function(g,w){g=W(g);var v=m.objectStore(p),x=v.get(b);x.onsuccess=function(k){return g(k.target.result)},x.onerror=ie(w)})},query:d(s),openCursor:f,count:function(y){var m=y.query,b=y.trans,g=m.index,w=m.range;return new Promise(function(v,x){var k=b.objectStore(p),S=g.isPrimaryKey?k:k.index(g.name),T=i(w),R=T?S.count(T):S.count();R.onsuccess=W(function(D){return v(D.target.result)}),R.onerror=ie(x)})}}}var u=r(e,n),o=u.schema,s=u.hasGetAll,c=o.tables.map(function(l){return a(l)}),h={};return c.forEach(function(l){return h[l.name]=l}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(l){var p=h[l];if(!p)throw new Error("Table '".concat(l,"' not found"));return h[l]},MIN_KEY:-1/0,MAX_KEY:et(t),schema:o}}function Ci(e,t){return t.reduce(function(n,r){var i=r.create;return K(K({},n),i(n))},e)}function Ri(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=Ci(Di(t,i,r),e.dbcore);return{dbcore:a}}function kt(e,t){var n=t.db,r=Ri(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(i){var a=i.name;e.core.schema.tables.some(function(u){return u.name===a})&&(i.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=i.core))})}function St(e,t,n,r){n.forEach(function(i){var a=r[i];t.forEach(function(u){var o=Fn(u,i);(!o||"value"in o&&o.value===void 0)&&(u===e.Transaction.prototype||u instanceof e.Transaction?fe(u,i,{get:function(){return this.table(i)},set:function(s){Mn(this,i,{value:s,writable:!0,configurable:!0,enumerable:!0})}}):u[i]=new e.Table(i,a))})})}function dn(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Ii(e,t){return e._cfg.version-t._cfg.version}function Bi(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=fn("$meta",yr("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var u=a._reject.bind(a),o=A.transless||A;pe(function(){if(A.trans=a,A.transless=o,t===0)V(i).forEach(function(s){vn(n,s,i[s].primKey,i[s].indexes)}),kt(e,n),E.follow(function(){return e.on.populate.fire(a)}).catch(u);else return kt(e,n),Fi(e,a,t).then(function(s){return ji(e,s,a,n)}).catch(u)})}function Mi(e,t){vr(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=At(e,e.idbdb,t);Ot(e,e._dbSchema,t);for(var r=pn(n,e._dbSchema),i=function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var h=t.objectStore(c.name);c.add.forEach(function(l){re&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(l.src)),Kt(h,l)})},a=0,u=r.change;a<u.length;a++){var o=u[a],s=i(o);if(typeof s=="object")return s.value}}function Fi(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(r){return r??n}):E.resolve(n)}function ji(e,t,n,r){var i=[],a=e._versions,u=e._dbSchema=At(e,e.idbdb,r),o=a.filter(function(c){return c._cfg.version>=t});if(o.length===0)return E.resolve();o.forEach(function(c){i.push(function(){var h=u,l=c._cfg.dbschema;Ot(e,h,r),Ot(e,l,r),u=e._dbSchema=l;var p=pn(h,l);p.add.forEach(function(b){vn(r,b[0],b[1].primKey,b[1].indexes)}),p.change.forEach(function(b){if(b.recreate)throw new O.Upgrade("Not yet support for changing primary key");var g=r.objectStore(b.name);b.add.forEach(function(w){return Kt(g,w)}),b.change.forEach(function(w){g.deleteIndex(w.name),Kt(g,w)}),b.del.forEach(function(w){return g.deleteIndex(w)})});var _=c._cfg.contentUpgrade;if(_&&c._cfg.version>t){kt(e,r),n._memoizedTables={};var f=Nn(l);p.del.forEach(function(b){f[b]=h[b]}),dn(e,[e.Transaction.prototype]),St(e,[e.Transaction.prototype],V(f),f),n.schema=f;var d=Vt(_);d&&Le();var y,m=E.follow(function(){if(y=_(n),y&&d){var b=ve.bind(null,null);y.then(b,b)}});return y&&typeof y.then=="function"?E.resolve(y):m.then(function(){return y})}}),i.push(function(h){var l=c._cfg.dbschema;Li(l,h),dn(e,[e.Transaction.prototype]),St(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),i.push(function(h){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===c._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(l){return l!=="$meta"})):h.objectStore("$meta").put(c._cfg.version,"version"))})});function s(){return i.length?E.resolve(i.shift()(n.idbtrans)).then(s):E.resolve()}return s().then(function(){vr(u,r)})}function pn(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var u={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)u.recreate=!0,n.change.push(u);else{var o=i.idxByName,s=a.idxByName,c=void 0;for(c in o)s[c]||u.del.push(c);for(c in s){var h=o[c],l=s[c];h?h.src!==l.src&&u.change.push(l):u.add.push(l)}(u.del.length>0||u.add.length>0||u.change.length>0)&&n.change.push(u)}}}return n}function vn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return Kt(i,a)}),i}function vr(e,t){V(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(re&&console.debug("Dexie: Creating missing table",n),vn(t,n,e[n].primKey,e[n].indexes))})}function Li(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Kt(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function At(e,t,n){var r={},i=st(t.objectStoreNames,0);return i.forEach(function(a){for(var u=n.objectStore(a),o=u.keyPath,s=ln(dr(o),o||"",!0,!1,!!u.autoIncrement,o&&typeof o!="string",!0),c=[],h=0;h<u.indexNames.length;++h){var l=u.index(u.indexNames[h]);o=l.keyPath;var p=ln(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&typeof o!="string",!1);c.push(p)}r[a]=fn(a,s,c)}),r}function Ni(e,t,n){e.verno=t.version/10;var r=e._dbSchema=At(e,t,n);e._storeNames=st(t.objectStoreNames,0),St(e,[e._allTables],V(r),r)}function Vi(e,t){var n=At(e,e.idbdb,t),r=pn(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Ot(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],u=n.objectStore(a);e._hasGetAll="getAll"in u;for(var o=0;o<u.indexNames.length;++o){var s=u.indexNames[o],c=u.index(s).keyPath,h=typeof c=="string"?c:"["+st(c).join("+")+"]";if(t[a]){var l=t[a].idxByName[h];l&&(l.name=s,delete t[a].idxByName[h],t[a].idxByName[s]=l)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&M.WorkerGlobalScope&&M instanceof M.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function yr(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return ln(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),z(i),n===0)})}var zi=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){V(t).forEach(function(r){if(t[r]!==null){var i=yr(t[r]),a=i.shift();if(a.unique=!0,a.multi)throw new O.Schema("Primary key cannot be multi-valued");i.forEach(function(u){if(u.auto)throw new O.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new O.Schema("Index must have a name and cannot be an empty string")}),n[r]=fn(r,a,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?U(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(u){U(i,u._cfg.storesSource),a=u._cfg.dbschema={},u._parseStoresSpec(i,a)}),n._dbSchema=a,dn(n,[n._allTables,n,n.Transaction.prototype]),St(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],V(a),a),n._storeNames=V(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=$t(this._cfg.contentUpgrade||L,t),this},e}();function Wi(e){return Je(zi.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function yn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new le(bt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function mn(e){return e&&typeof e.databases=="function"}function $i(e){var t=e.indexedDB,n=e.IDBKeyRange;return mn(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==bt})}):yn(t,n).toCollection().primaryKeys()}function Ui(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!mn(n)&&t!==bt&&yn(n,r).put({name:t}).catch(L)}function Yi(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!mn(n)&&t!==bt&&yn(n,r).delete(t).catch(L)}function gn(e){return pe(function(){return A.letThrough=!0,e()})}function Hi(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}var bn;function wn(e){return!("from"in e)}var Q=function(e,t){if(this)U(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new Q;return e&&"d"in e&&U(n,e),n}};Ce(Q.prototype,(bn={add:function(e){return rt(this,e),this},addKey:function(e){return nt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return nt(t,n,n)}),this}},bn[Nt]=function(){return _n(this)},bn));function nt(e,t,n){var r=F(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(wn(e))return U(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(F(n,e.from)<0)return i?nt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},mr(e);if(F(t,e.to)>0)return a?nt(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},mr(e);F(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),F(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var u=!e.r;i&&!e.l&&rt(e,i),a&&u&&rt(e,a)}}function rt(e,t){function n(r,i){var a=i.from,u=i.to,o=i.l,s=i.r;nt(r,a,u),o&&n(r,o),s&&n(r,s)}wn(t)||n(e,t)}function Tt(e,t){var n=_n(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=_n(e),u=a.next(i.from),o=u.value;!r.done&&!u.done;){if(F(o.from,i.to)<=0&&F(o.to,i.from)>=0)return!0;F(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(u=a.next(i.from)).value}return!1}function _n(e){var t=wn(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&F(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||F(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function mr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",u=K({},e),o=e[i];e.from=o.from,e.to=o.to,e[i]=o[i],u[i]=o[a],e[a]=u,u.d=gr(u)}e.d=gr(e)}function gr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Pt(e,t){return V(t).forEach(function(n){e[n]?rt(e[n],t[n]):e[n]=Wn(t[n])}),e}function xn(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Tt(t[n],e[n])})}var Pe={},En={},kn=!1;function Dt(e,t){Pt(En,e),kn||(kn=!0,setTimeout(function(){kn=!1;var n=En;En={},Sn(n,!1)},0))}function Sn(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(Pe);r<i.length;r++){var a=i[r];br(a,e,n,t)}else for(var u in e){var o=/^idb\:\/\/(.*)\/(.*)\//.exec(u);if(o){var s=o[1],c=o[2],a=Pe["idb://".concat(s,"/").concat(c)];a&&br(a,e,n,t)}}n.forEach(function(h){return h()})}function br(e,t,n,r){for(var i=[],a=0,u=Object.entries(e.queries.query);a<u.length;a++){for(var o=u[a],s=o[0],c=o[1],h=[],l=0,p=c;l<p.length;l++){var _=p[l];xn(t,_.obsSet)?_.subscribers.forEach(function(m){return n.add(m)}):r&&h.push(_)}r&&i.push([s,h])}if(r)for(var f=0,d=i;f<d.length;f++){var y=d[f],s=y[0],h=y[1];e.queries.query[s]=h}}function Qi(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?$(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(e.verno*10),a=!1;function u(){if(t.openCanceller!==r)throw new O.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,s=null,c=!1,h=function(){return new E(function(l,p){if(u(),!n)throw new O.MissingAPI;var _=e.name,f=t.autoSchema||!i?n.open(_):n.open(_,i);if(!f)throw new O.MissingAPI;f.onerror=ie(p),f.onblocked=W(e._fireOnBlocked),f.onupgradeneeded=W(function(d){if(s=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=qe,s.abort(),f.result.close();var y=n.deleteDatabase(_);y.onsuccess=y.onerror=W(function(){p(new O.NoSuchDatabase("Database ".concat(_," doesnt exist")))})}else{s.onerror=ie(p);var m=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;c=m<1,e.idbdb=f.result,a&&Mi(e,s),Bi(e,m/10,s,p)}},p),f.onsuccess=W(function(){s=null;var d=e.idbdb=f.result,y=st(d.objectStoreNames);if(y.length>0)try{var m=d.transaction(Oi(y),"readonly");if(t.autoSchema)Ni(e,d,m);else if(Ot(e,e._dbSchema,m),!Vi(e,m)&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),d.close(),i=d.version+1,a=!0,l(h());kt(e,m)}catch{}Ne.push(e),d.onversionchange=W(function(b){t.vcFired=!0,e.on("versionchange").fire(b)}),d.onclose=W(function(b){e.on("close").fire(b)}),c&&Ui(e._deps,_),l()},p)}).catch(function(l){switch(l?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),h();break;case"VersionError":if(i>0)return i=0,h();break}return E.reject(l)})};return E.race([r,(typeof navigator>"u"?E.resolve():Hi()).then(h)]).then(function(){return u(),t.onReadyBeingFired=[],E.resolve(gn(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(t.onReadyBeingFired.length>0){var p=t.onReadyBeingFired.reduce($t,L);return t.onReadyBeingFired=[],E.resolve(gn(function(){return p(e.vip)})).then(l)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(l){t.dbOpenError=l;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),$(l)}).finally(function(){t.openComplete=!0,o()}).then(function(){if(c){var l={};e.tables.forEach(function(p){p.schema.indexes.forEach(function(_){_.name&&(l["idb://".concat(e.name,"/").concat(p.name,"/").concat(_.name)]=new Q(-1/0,[[[]]]))}),l["idb://".concat(e.name,"/").concat(p.name,"/")]=l["idb://".concat(e.name,"/").concat(p.name,"/:dels")]=new Q(-1/0,[[[]]])}),ge(Ze).fire(l),Sn(l,!0)}return e})}function Kn(e){var t=function(u){return e.next(u)},n=function(u){return e.throw(u)},r=a(t),i=a(n);function a(u){return function(o){var s=u(o),c=s.value;return s.done?c:!c||typeof c.then!="function"?z(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(t)()}function Gi(e,t,n){var r=arguments.length;if(r<2)throw new O.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=Vn(i);return[e,a,n]}function wr(e,t,n,r,i){return E.resolve().then(function(){var a=A.transless||A,u=e._createTransaction(t,n,e._dbSchema,r);u.explicit=!0;var o={trans:u,transless:a};if(r)u.idbtrans=r.idbtrans;else try{u.create(),u.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(l){return l.name===Wt.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return wr(e,t,n,null,i)})):$(l)}var s=Vt(i);s&&Le();var c,h=E.follow(function(){if(c=i.call(u,u),c)if(s){var l=ve.bind(null,null);c.then(l,l)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Kn(c))},o);return(c&&typeof c.then=="function"?E.resolve(c).then(function(l){return u.active?l:$(new O.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):h.then(function(){return c})).then(function(l){return r&&u._resolve(),u._completion.then(function(){return l})}).catch(function(l){return u._reject(l),$(l)})})}function Ct(e,t,n){for(var r=z(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Xi(e){return K(K({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function u(d,y,m){var b=tt(d),g=i[b]=i[b]||[],w=d==null?0:typeof d=="string"?1:d.length,v=y>0,x=K(K({},m),{name:v?"".concat(b,"(virtual-from:").concat(m.name,")"):m.name,lowLevelIndex:m,isVirtual:v,keyTail:y,keyLength:w,extractKey:hn(d),unique:!v&&m.unique});if(g.push(x),x.isPrimaryKey||a.push(x),w>1){var k=w===2?d[0]:d.slice(0,w-1);u(k,y+1,m)}return g.sort(function(S,T){return S.keyTail-T.keyTail}),x}var o=u(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(var s=0,c=r.indexes;s<c.length;s++){var h=c[s];u(h.keyPath,0,h)}function l(d){var y=i[tt(d)];return y&&y[0]}function p(d,y){return{type:d.type===1?2:d.type,lower:Ct(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:Ct(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0}}function _(d){var y=d.query.index;return y.isVirtual?K(K({},d),{query:{index:y.lowLevelIndex,range:p(d.query.range,y.keyTail)}}):d}var f=K(K({},n),{schema:K(K({},r),{primaryKey:o,indexes:a,getIndexByKeyPath:l}),count:function(d){return n.count(_(d))},query:function(d){return n.query(_(d))},openCursor:function(d){var y=d.query.index,m=y.keyTail,b=y.isVirtual,g=y.keyLength;if(!b)return n.openCursor(d);function w(v){function x(S){S!=null?v.continue(Ct(S,d.reverse?e.MAX_KEY:e.MIN_KEY,m)):d.unique?v.continue(v.key.slice(0,g).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,m)):v.continue()}var k=Object.create(v,{continue:{value:x},continuePrimaryKey:{value:function(S,T){v.continuePrimaryKey(Ct(S,e.MAX_KEY,m),T)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var S=v.key;return g===1?S[0]:S.slice(0,g)}},value:{get:function(){return v.value}}});return k}return n.openCursor(_(d)).then(function(v){return v&&w(v)})}});return f}})}var Ji={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Xi};function An(e,t,n,r){return n=n||{},r=r||"",V(e).forEach(function(i){if(!X(t,i))n[r+i]=void 0;else{var a=e[i],u=t[i];if(typeof a=="object"&&typeof u=="object"&&a&&u){var o=Lt(a),s=Lt(u);o!==s?n[r+i]=t[i]:o==="Object"?An(a,u,n,r+i+"."):a!==u&&(n[r+i]=t[i])}else a!==u&&(n[r+i]=t[i])}}),V(t).forEach(function(i){X(e,i)||(n[r+i]=t[i])}),n}function On(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var qi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return K(K({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=K(K({},n),{mutate:function(a){var u=A.trans,o=u.table(t).hook,s=o.deleting,c=o.creating,h=o.updating;switch(a.type){case"add":if(c.fire===L)break;return u._promise("readwrite",function(){return l(a)},!0);case"put":if(c.fire===L&&h.fire===L)break;return u._promise("readwrite",function(){return l(a)},!0);case"delete":if(s.fire===L)break;return u._promise("readwrite",function(){return l(a)},!0);case"deleteRange":if(s.fire===L)break;return u._promise("readwrite",function(){return p(a)},!0)}return n.mutate(a);function l(f){var d=A.trans,y=f.keys||On(r,f);if(!y)throw new Error("Keys missing");return f=f.type==="add"||f.type==="put"?K(K({},f),{keys:y}):K({},f),f.type!=="delete"&&(f.values=ne([],f.values,!0)),f.keys&&(f.keys=ne([],f.keys,!0)),Zi(n,f,y).then(function(m){var b=y.map(function(g,w){var v=m[w],x={onerror:null,onsuccess:null};if(f.type==="delete")s.fire.call(x,g,v,d);else if(f.type==="add"||v===void 0){var k=c.fire.call(x,g,f.values[w],d);g==null&&k!=null&&(g=k,f.keys[w]=g,r.outbound||J(f.values[w],r.keyPath,g))}else{var S=An(v,f.values[w]),T=h.fire.call(x,S,g,v,d);if(T){var R=f.values[w];Object.keys(T).forEach(function(D){X(R,D)?R[D]=T[D]:J(R,D,T[D])})}}return x});return n.mutate(f).then(function(g){for(var w=g.failures,v=g.results,x=g.numFailures,k=g.lastResult,S=0;S<y.length;++S){var T=v?v[S]:y[S],R=b[S];T==null?R.onerror&&R.onerror(w[S]):R.onsuccess&&R.onsuccess(f.type==="put"&&m[S]?f.values[S]:T)}return{failures:w,results:v,numFailures:x,lastResult:k}}).catch(function(g){return b.forEach(function(w){return w.onerror&&w.onerror(g)}),Promise.reject(g)})})}function p(f){return _(f.trans,f.range,1e4)}function _(f,d,y){return n.query({trans:f,values:!1,query:{index:r,range:d},limit:y}).then(function(m){var b=m.result;return l({type:"delete",keys:b,trans:f}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):b.length<y?{failures:[],numFailures:0,lastResult:void 0}:_(f,K(K({},d),{lower:b[b.length-1],lowerOpen:!0}),y)})})}}});return i}})}};function Zi(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function _r(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)F(t.keys[i],e[a])===0&&(r.push(n?he(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var ea={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return K(K({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=_r(r.keys,r.trans._cache,r.cache==="clone");return i?E.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?he(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function xr(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Er(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var ta={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new Q(e.MIN_KEY,e.MAX_KEY);return K(K({},e),{transaction:function(r,i,a){if(A.subscr&&i!=="readonly")throw new O.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(A.querier));return e.transaction(r,i,a)},table:function(r){var i=e.table(r),a=i.schema,u=a.primaryKey,o=a.indexes,s=u.extractKey,c=u.outbound,h=u.autoIncrement&&o.filter(function(f){return f.compound&&f.keyPath.includes(u.keyPath)}),l=K(K({},i),{mutate:function(f){var d=f.trans,y=f.mutatedParts||(f.mutatedParts={}),m=function(D){var I="idb://".concat(t,"/").concat(r,"/").concat(D);return y[I]||(y[I]=new Q)},b=m(""),g=m(":dels"),w=f.type,v=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[On(u,f).filter(function(D){return D}),f.values]:[],x=v[0],k=v[1],S=f.trans._cache;if(z(x)){b.addKeys(x);var T=w==="delete"||x.length===k.length?_r(x,S):null;T||g.addKeys(x),(T||k)&&na(m,a,T,k)}else if(x){var R={from:x.lower,to:x.upper};g.add(R),b.add(R)}else b.add(n),g.add(n),a.indexes.forEach(function(D){return m(D.name).add(n)});return i.mutate(f).then(function(D){return x&&(f.type==="add"||f.type==="put")&&(b.addKeys(D.results),h&&h.forEach(function(I){var C=f.values.map(function(P){return I.extractKey(P)}),N=I.keyPath.findIndex(function(P){return P===u.keyPath});D.results.forEach(function(P){return C[N]=P}),m(I.name).addKeys(C)})),d.mutatedParts=Pt(d.mutatedParts||{},y),D})}}),p=function(f){var d,y,m=f.query,b=m.index,g=m.range;return[b,new Q((d=g.lower)!==null&&d!==void 0?d:e.MIN_KEY,(y=g.upper)!==null&&y!==void 0?y:e.MAX_KEY)]},_={get:function(f){return[u,new Q(f.key)]},getMany:function(f){return[u,new Q().addKeys(f.keys)]},count:p,query:p,openCursor:p};return V(_).forEach(function(f){l[f]=function(d){var y=A.subscr,m=!!y,b=xr(A,i)&&Er(f,d),g=b?d.obsSet={}:y;if(m){var w=function(D){var I="idb://".concat(t,"/").concat(r,"/").concat(D);return g[I]||(g[I]=new Q)},v=w(""),x=w(":dels"),k=_[f](d),S=k[0],T=k[1];if(f==="query"&&S.isPrimaryKey&&!d.values?x.add(T):w(S.name||"").add(T),!S.isPrimaryKey)if(f==="count")x.add(n);else{var R=f==="query"&&c&&d.values&&i.query(K(K({},d),{values:!1}));return i[f].apply(this,arguments).then(function(D){if(f==="query"){if(c&&d.values)return R.then(function(P){var H=P.result;return v.addKeys(H),D});var I=d.values?D.result.map(s):D.result;d.values?v.addKeys(I):x.addKeys(I)}else if(f==="openCursor"){var C=D,N=d.values;return C&&Object.create(C,{key:{get:function(){return x.addKey(C.primaryKey),C.key}},primaryKey:{get:function(){var P=C.primaryKey;return x.addKey(P),P}},value:{get:function(){return N&&v.addKey(C.primaryKey),C.value}}})}return D})}}return i[f].apply(this,arguments)}}),l}})}};function na(e,t,n,r){function i(a){var u=e(a.name||"");function o(c){return c!=null?a.extractKey(c):null}var s=function(c){return a.multiEntry&&z(c)?c.forEach(function(h){return u.addKey(h)}):u.addKey(c)};(n||r).forEach(function(c,h){var l=n&&o(n[h]),p=r&&o(r[h]);F(l,p)!==0&&(l!=null&&s(l),p!=null&&s(p))})}t.indexes.forEach(i)}function kr(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===r)return null;var i=K({},t);return z(i.keys)&&(i.keys=i.keys.filter(function(a,u){return!(u in n.failures)})),"values"in i&&z(i.values)&&(i.values=i.values.filter(function(a,u){return!(u in n.failures)})),i}function ra(e,t){return t.lower===void 0?!0:t.lowerOpen?F(e,t.lower)>0:F(e,t.lower)>=0}function ia(e,t){return t.upper===void 0?!0:t.upperOpen?F(e,t.upper)<0:F(e,t.upper)<=0}function Tn(e,t){return ra(e,t)&&ia(e,t)}function Sr(e,t,n,r,i,a){if(!n||n.length===0)return e;var u=t.query.index,o=u.multiEntry,s=t.query.range,c=r.schema.primaryKey,h=c.extractKey,l=u.extractKey,p=(u.lowLevelIndex||u).extractKey,_=n.reduce(function(f,d){var y=f,m=d.type==="add"||d.type==="put"?d.values.filter(function(v){var x=l(v);return o&&z(x)?x.some(function(k){return Tn(k,s)}):Tn(x,s)}).map(function(v){return v=he(v),a&&Object.freeze(v),v}):[];switch(d.type){case"add":y=f.concat(t.values?m:m.map(function(v){return h(v)}));break;case"put":var b=new Q().addKeys(d.values.map(function(v){return h(v)}));y=f.filter(function(v){var x=t.values?h(v):v;return!Tt(new Q(x),b)}).concat(t.values?m:m.map(function(v){return h(v)}));break;case"delete":var g=new Q().addKeys(d.keys);y=f.filter(function(v){var x=t.values?h(v):v;return!Tt(new Q(x),g)});break;case"deleteRange":var w=d.range;y=f.filter(function(v){return!Tn(h(v),w)});break}return y},e);return _===e?e:(_.sort(function(f,d){return F(p(f),p(d))||F(h(f),h(d))}),t.limit&&t.limit<1/0&&(_.length>t.limit?_.length=t.limit:e.length===t.limit&&_.length<t.limit&&(i.dirty=!0)),a?Object.freeze(_):_)}function Kr(e,t){return F(e.lower,t.lower)===0&&F(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function aa(e,t,n,r){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var i=F(e,t);if(i===0){if(n&&r)return 0;if(n)return 1;if(r)return-1}return i}function ua(e,t,n,r){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var i=F(e,t);if(i===0){if(n&&r)return 0;if(n)return-1;if(r)return 1}return i}function oa(e,t){return aa(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&ua(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function sa(e,t,n,r){var i=Pe["idb://".concat(e,"/").concat(t)];if(!i)return[];var a=i.queries[n];if(!a)return[null,!1,i,null];var u=r.query?r.query.index.name:null,o=a[u||""];if(!o)return[null,!1,i,null];switch(n){case"query":var s=o.find(function(l){return l.req.limit===r.limit&&l.req.values===r.values&&Kr(l.req.query.range,r.query.range)});if(s)return[s,!0,i,o];var c=o.find(function(l){var p="limit"in l.req?l.req.limit:1/0;return p>=r.limit&&(r.values?l.req.values:!0)&&oa(l.req.query.range,r.query.range)});return[c,!1,i,o];case"count":var h=o.find(function(l){return Kr(l.req.query.range,r.query.range)});return[h,!!h,i,o]}}function ca(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&la(e,t)})}function la(e,t){setTimeout(function(){e.subscribers.size===0&&Ee(t,e)},3e3)}var fa={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=K(K({},e),{transaction:function(r,i,a){var u=e.transaction(r,i,a);if(i==="readwrite"){var o=new AbortController,s=o.signal,c=function(h){return function(){if(o.abort(),i==="readwrite"){for(var l=new Set,p=0,_=r;p<_.length;p++){var f=_[p],d=Pe["idb://".concat(t,"/").concat(f)];if(d){var y=e.table(f),m=d.optimisticOps.filter(function(N){return N.trans===u});if(u._explicit&&h&&u.mutatedParts)for(var b=0,g=Object.values(d.queries.query);b<g.length;b++)for(var w=g[b],v=0,x=w.slice();v<x.length;v++){var k=x[v];xn(k.obsSet,u.mutatedParts)&&(Ee(w,k),k.subscribers.forEach(function(N){return l.add(N)}))}else if(m.length>0){d.optimisticOps=d.optimisticOps.filter(function(N){return N.trans!==u});for(var S=0,T=Object.values(d.queries.query);S<T.length;S++)for(var w=T[S],R=0,D=w.slice();R<D.length;R++){var k=D[R];if(k.res!=null&&u.mutatedParts)if(h&&!k.dirty){var I=Object.isFrozen(k.res),C=Sr(k.res,k.req,m,y,k,I);k.dirty?(Ee(w,k),k.subscribers.forEach(function(H){return l.add(H)})):C!==k.res&&(k.res=C,k.promise=E.resolve({result:C}))}else k.dirty&&Ee(w,k),k.subscribers.forEach(function(H){return l.add(H)})}}}}l.forEach(function(N){return N()})}}};u.addEventListener("abort",c(!1),{signal:s}),u.addEventListener("error",c(!1),{signal:s}),u.addEventListener("complete",c(!0),{signal:s})}return u},table:function(r){var i=e.table(r),a=i.schema.primaryKey,u=K(K({},i),{mutate:function(o){var s=A.trans;if(a.outbound||s.db._options.cache==="disabled"||s.explicit)return i.mutate(o);var c=Pe["idb://".concat(t,"/").concat(r)];if(!c)return i.mutate(o);var h=i.mutate(o);return(o.type==="add"||o.type==="put")&&(o.values.length>=50||On(a,o).some(function(l){return l==null}))?h.then(function(l){var p=K(K({},o),{values:o.values.map(function(f,d){var y,m=!((y=a.keyPath)===null||y===void 0)&&y.includes(".")?he(f):K({},f);return J(m,a.keyPath,l.results[d]),m})}),_=kr(c,p,l);c.optimisticOps.push(_),queueMicrotask(function(){return o.mutatedParts&&Dt(o.mutatedParts)})}):(c.optimisticOps.push(o),o.mutatedParts&&Dt(o.mutatedParts),h.then(function(l){if(l.numFailures>0){Ee(c.optimisticOps,o);var p=kr(c,o,l);p&&c.optimisticOps.push(p),o.mutatedParts&&Dt(o.mutatedParts)}}),h.catch(function(){Ee(c.optimisticOps,o),o.mutatedParts&&Dt(o.mutatedParts)})),h},query:function(o){var s;if(!xr(A,i)||!Er("query",o))return i.query(o);var c=((s=A.trans)===null||s===void 0?void 0:s.db._options.cache)==="immutable",h=A,l=h.requery,p=h.signal,_=sa(t,r,"query",o),f=_[0],d=_[1],y=_[2],m=_[3];if(f&&d)f.obsSet=o.obsSet;else{var b=i.query(o).then(function(g){var w=g.result;if(f&&(f.res=w),c){for(var v=0,x=w.length;v<x;++v)Object.freeze(w[v]);Object.freeze(w)}else g.result=he(w);return g}).catch(function(g){return m&&f&&Ee(m,f),Promise.reject(g)});f={obsSet:o.obsSet,promise:b,subscribers:new Set,type:"query",req:o,dirty:!1},m?m.push(f):(m=[f],y||(y=Pe["idb://".concat(t,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),y.queries.query[o.query.index.name||""]=m)}return ca(f,m,l,p),f.promise.then(function(g){return{result:Sr(g.result,o,y?.optimisticOps,i,f,c)}})}});return u}});return n}};function Rt(e,t){return new Proxy(e,{get:function(n,r,i){return r==="db"?t:Reflect.get(n,r,i)}})}var le=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=K({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:L,dbReadyPromise:null,cancelOpen:L,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};u.dbReadyPromise=new E(function(s){u.dbReadyResolve=s}),u.openCanceller=new E(function(s,c){u.cancelOpen=c}),this._state=u,this.name=t,this.on=Xe(this,"populate","blocked","versionchange","close",{ready:[$t,L]}),this.on.ready.subscribe=jn(this.on.ready.subscribe,function(s){return function(c,h){e.vip(function(){var l=r._state;if(l.openComplete)l.dbOpenError||E.resolve().then(c),h&&s(c);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(c),h&&s(c);else{s(c);var p=r;h||s(function _(){p.on.ready.unsubscribe(c),p.on.ready.unsubscribe(_)})}})}}),this.Collection=bi(this),this.Table=vi(this),this.Transaction=Ai(this),this.Version=Wi(this),this.WhereClause=Si(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(s.oldVersion/10))}),this._maxKey=et(n.IDBKeyRange),this._createTransaction=function(s,c,h,l){return new r.Transaction(s,c,h,r._options.chromeTransactionDurability,l)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),Ne.filter(function(c){return c.name===r.name&&c!==r&&!c._state.vcFired}).map(function(c){return c.on("versionchange").fire(s)})},this.use(ea),this.use(fa),this.use(ta),this.use(Ji),this.use(qi);var o=new Proxy(this,{get:function(s,c,h){if(c==="_vip")return!0;if(c==="table")return function(p){return Rt(r.table(p),o)};var l=Reflect.get(s,c,h);return l instanceof sr?Rt(l,o):c==="tables"?l.map(function(p){return Rt(p,o)}):c==="_createTransaction"?function(){var p=l.apply(this,arguments);return Rt(p,o)}:l}});this.vip=o,a.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new O.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new O.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Ii),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||A.letThrough||this._vip)?t():new E(function(r,i){if(n._state.openComplete)return i(new O.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen){i(new O.DatabaseClosed);return}n.open().catch(L)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var u=this._middlewares[n]||(this._middlewares[n]=[]);return u.push({stack:n,create:r,level:i??10,name:a}),u.sort(function(o,s){return o.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){var t=this;return Ae(de,function(){return Qi(t)})},e.prototype._close=function(){var t=this._state,n=Ne.indexOf(this);if(n>=0&&Ne.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new E(function(r){t.dbReadyResolve=r}),t.openCanceller=new E(function(r,i){t.cancelOpen=i}))},e.prototype.close=function(t){var n=t===void 0?{disableAutoOpen:!0}:t,r=n.disableAutoOpen,i=this._state;r?(i.isBeingOpened&&i.cancelOpen(new O.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new O.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},e.prototype.delete=function(t){var n=this;t===void 0&&(t={disableAutoOpen:!0});var r=arguments.length>0&&typeof arguments[0]!="object",i=this._state;return new E(function(a,u){var o=function(){n.close(t);var s=n._deps.indexedDB.deleteDatabase(n.name);s.onsuccess=W(function(){Yi(n._deps,n.name),a()}),s.onerror=ie(u),s.onblocked=n._fireOnBlocked};if(r)throw new O.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return V(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Gi.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=A.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var u=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var o,s;try{if(s=n.map(function(h){var l=h instanceof i.Table?h.name:h;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),t=="r"||t===nn)o=nn;else if(t=="rw"||t==rn)o=rn;else throw new O.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===nn&&o===rn)if(u)a=null;else throw new O.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(h){if(a&&a.storeNames.indexOf(h)===-1)if(u)a=null;else throw new O.SubTransaction("Table "+h+" not included in parent transaction.")}),u&&a&&!a.active&&(a=null)}}catch(h){return a?a._promise(null,function(l,p){p(h)}):$(h)}var c=wr.bind(null,this,o,s,a,r);return a?a._promise(o,c,"lock"):A.trans?Ae(A.transless,function(){return i._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!X(this._allTables,t))throw new O.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e}(),ha=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",da=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[ha]=function(){return this},e}(),It;try{It={indexedDB:M.indexedDB||M.mozIndexedDB||M.webkitIndexedDB||M.msIndexedDB,IDBKeyRange:M.IDBKeyRange||M.webkitIDBKeyRange}}catch{It={indexedDB:null,IDBKeyRange:null}}function Ar(e){var t=!1,n,r=new da(function(i){var a=Vt(e);function u(m){var b=Fe();try{a&&Le();var g=pe(e,m);return a&&(g=g.finally(ve)),g}finally{b&&je()}}var o=!1,s,c={},h={},l={get closed(){return o},unsubscribe:function(){o||(o=!0,s&&s.abort(),p&&ge.storagemutated.unsubscribe(d))}};i.start&&i.start(l);var p=!1,_=function(){return Zt(y)};function f(){return xn(h,c)}var d=function(m){Pt(c,m),f()&&_()},y=function(){if(!(o||!It.indexedDB)){c={};var m={};s&&s.abort(),s=new AbortController;var b={subscr:m,signal:s.signal,requery:_,querier:e,trans:null},g=u(b);Promise.resolve(g).then(function(w){t=!0,n=w,!(o||b.signal.aborted)&&(c={},h=m,!Wr(h)&&!p&&(ge(Ze,d),p=!0),Zt(function(){return!o&&i.next&&i.next(w)}))},function(w){t=!1,["DatabaseClosedError","AbortError"].includes(w?.name)||o||Zt(function(){o||i.error&&i.error(w)})})}};return setTimeout(_,0),l});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var De=le;Ce(De,K(K({},lt),{delete:function(e){var t=new De(e,{addons:[]});return t.delete()},exists:function(e){return new De(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return $i(De.dependencies).then(e)}catch{return $(new O.MissingAPI)}},defineClass:function(){function e(t){U(this,t)}return e},ignoreTransaction:function(e){return A.trans?Ae(A.transless,e):e()},vip:gn,async:function(e){return function(){try{var t=Kn(e.apply(this,arguments));return!t||typeof t.then!="function"?E.resolve(t):t}catch(n){return $(n)}}},spawn:function(e,t,n){try{var r=Kn(e.apply(n,t||[]));return!r||typeof r.then!="function"?E.resolve(r):r}catch(i){return $(i)}},currentTransaction:{get:function(){return A.trans||null}},waitFor:function(e,t){var n=E.resolve(typeof e=="function"?De.ignoreTransaction(e):e).timeout(t||6e4);return A.trans?A.trans.waitFor(n):n},Promise:E,debug:{get:function(){return re},set:function(e){Hn(e)}},derive:Re,extend:U,props:Ce,override:jn,Events:Xe,on:ge,liveQuery:Ar,extendObservabilitySet:Pt,getByKeyPath:oe,setByKeyPath:J,delByKeyPath:Nr,shallowClone:Nn,deepClone:he,getObjectDiff:An,cmp:F,asap:Ln,minKey:tn,addons:[],connections:Ne,errnames:Wt,dependencies:It,cache:Pe,semVer:nr,version:nr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),De.maxKey=et(De.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ge(Ze,function(e){if(!be){var t;t=new CustomEvent(cn,{detail:e}),be=!0,dispatchEvent(t),be=!1}}),addEventListener(cn,function(e){var t=e.detail;be||Pn(t)}));function Pn(e){var t=be;try{be=!0,ge.storagemutated.fire(e),Sn(e,!0)}finally{be=t}}var be=!1,we,Dn=function(){};typeof BroadcastChannel<"u"&&(Dn=function(){we=new BroadcastChannel(cn),we.onmessage=function(e){return e.data&&Pn(e.data)}},Dn(),typeof we.unref=="function"&&we.unref(),ge(Ze,function(e){be||we.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!le.disableBfCache&&e.persisted){re&&console.debug("Dexie: handling persisted pagehide"),we?.close();for(var t=0,n=Ne;t<n.length;t++){var r=n[t];r.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!le.disableBfCache&&e.persisted&&(re&&console.debug("Dexie: handling persisted pageshow"),Dn(),Pn({all:new Q(-1/0,[[]])}))}));function pa(e,t){return new on({replacePrefix:[e,t]})}E.rejectionMapper=Gr,Hn(re);var va=Object.freeze({__proto__:null,Dexie:le,liveQuery:Ar,Entity:ar,cmp:F,PropModSymbol:mi,PropModification:on,replacePrefix:pa,default:le,RangeSet:Q,mergeRanges:rt,rangesOverlap:Tt});return K(le,va,{default:le}),le})});var Tr="1.7.0",Pr="866",Dr=!0;var Mt=ka(Cr(),1),Rr=Symbol.for("Dexie"),Ft=globalThis[Rr]||(globalThis[Rr]=Mt.default);if(Mt.default.semVer!==Ft.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Mt.default.semVer} and ${Ft.semVer}`);var{liveQuery:Da,mergeRanges:Ca,rangesOverlap:Ra,RangeSet:Ia,cmp:Ba,Entity:Ma,PropModSymbol:Fa,PropModification:ja,replacePrefix:La}=Ft;var Ir=Ft;var Bn=class extends Ir{extensionTools;options;constructor(){super("Verkfi"),this.version(5).stores({extensionTools:"to, name, desc, to, icon, color, main, files, settings",options:"key, value"})}},Sa=new Bn,Br=Sa;var Mr=["/tools/pillar","/tools/cylinder","/tools/speech","/tools/shaizi","/tools/readnumber","/tools/extension","/tools/cubic","/tools/jigsaw","/tools/reversal","/tools/filter","/tools/countletter","/tools/mathgen","/tools/pi","/tools/audiotools","/","/first","/setting/about","/setting/theme","/setting/option","/setting/extensions"];var ut=`Verkfi-${Tr}-${Dr==!0?`dev${Pr}`:"prod"}`,at=B=>console.log("%cServiceWorker","background: #52c41a;border-radius: 0.5em;color: white;font-weight: bold;padding: 2px 0.5em",B),Aa=async()=>{(await caches.keys()).filter(j=>j!==ut).map(async j=>(at(`\u5DF2\u5220\u9664\u7F13\u5B58\u201C${j}\u201D`),await caches.delete(j)))},Oa=["/index.webmanifest","/image/favicon.png"].concat(Mr);at(`\u7248\u672C\u4E3A${ut}`);self.addEventListener("install",async B=>{let j=async()=>{let K=await caches.open(ut);try{await K.addAll(Oa)}catch(ne){console.error(ne)}};return B.waitUntil((async()=>{await j(),self.skipWaiting()})())});self.addEventListener("activate",B=>B.waitUntil((async()=>(await Aa(),self.clients.claim()))()));self.addEventListener("fetch",B=>{if(B.request.method!=="GET")return;let j=B.request.url,K=String(j),ne=new URL(K),M=ne.pathname.split("/");if(K.startsWith("chrome-extension://"))return;let V;M.shift(),B.respondWith((async()=>{let z=await caches.open(ut),U=B.request.clone();if(at(`\u6293\u53D6: ${K}`),M[0]==="handle"){let G=`/tools/${ne.searchParams.get("handle").replace(/web\+verkfi:\/\//g,"")}`;at(`\u68C0\u6D4B\u5230URL\uFF1A${K}\u4E2D\u542B\u6709"handle"\uFF0C\u91CD\u5B9A\u5411\u81F3${G}`);let ot=new Headers;return ot.append("Location",G),new Response("",{status:301,statusText:"Redirected by ServiceWorker because this is a handler page",headers:ot})}else{if(M[0]==="extensionfiles")return new Response(new Blob([(await Br.extensionTools.get({to:M[1]})).files.filter(G=>G[0]===M[2])[0][1]]));M[0]==="tools"&&M[1]==="extension"?V=await z.match(U,{ignoreSearch:!0}):K.includes("_rsc=")?(at(`\u68C0\u6D4B\u5230URL\uFF1A${K} \u4E2D\u542B\u6709searchParam\u201Crsc\u201D\uFF0C\u5DF2\u8FD4\u56DE\u65E0rsc\u7248\u672C`),V=await z.match(U,{ignoreSearch:!0})):V=await z.match(U)}if(!V){let G=await fetch(U);return z.put(U,G.clone()),G}return V})())});var Qa=ut;})();
/*! Bundled license information:

dexie/dist/dexie.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
